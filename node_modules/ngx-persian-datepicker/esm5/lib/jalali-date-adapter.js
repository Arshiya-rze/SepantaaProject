/**
 * @fileoverview added by tsickle
 * Generated from: lib/jalali-date-adapter.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Inject, Optional } from '@angular/core';
import { DateAdapter } from '@angular/material';
import * as jMoment from 'moment-jalaali';
import { MAT_DATE_LOCALE } from './injectors';
/** @type {?} */
var minmin = jMoment;
var JalaliMomentDateAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(JalaliMomentDateAdapter, _super);
    function JalaliMomentDateAdapter(matDateLocale) {
        var _this = _super.call(this) || this;
        _this.setLocale(matDateLocale || minmin.locale('fa'));
        minmin.loadPersian();
        return _this;
    }
    /**
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.invalid = /**
     * @return {?}
     */
    function () {
        return (/** @type {?} */ ('hi'));
    };
    /**
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.toIso8601 = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return 'hi';
    };
    /**
     * returns year in jalali calendar system.
     */
    /**
     * returns year in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getYear = /**
     * returns year in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).jYear();
    };
    /**
     * returns month in jalali calendar system.
     */
    /**
     * returns month in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getMonth = /**
     * returns month in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).jMonth();
    };
    /**
     * returns day in jalali calendar system.
     */
    /**
     * returns day in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getDate = /**
     * returns day in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).jDate();
    };
    /**
     * returns Day Of Week in jalali calendar system.
     */
    /**
     * returns Day Of Week in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getDayOfWeek = /**
     * returns Day Of Week in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).day();
    };
    /**
     * returns Month Names in jalali calendar system.
     * most of the time we use long format. short or narrow format for month names is a little odd.
     */
    /**
     * returns Month Names in jalali calendar system.
     * most of the time we use long format. short or narrow format for month names is a little odd.
     * @param {?} style
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getMonthNames = /**
     * returns Month Names in jalali calendar system.
     * most of the time we use long format. short or narrow format for month names is a little odd.
     * @param {?} style
     * @return {?}
     */
    function (style) {
        /** @type {?} */
        var r = [];
        minmin.loadPersian({ dialect: 'persian', usePersianDigits: true });
        /** @type {?} */
        var l = minmin().localeData();
        if (style === 'long' || style === 'short') {
            Object.keys(l).forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                if (key === '_jMonths') {
                    /** @type {?} */
                    var values = l[key];
                    for (var index = 0; index < values.length; index++) {
                        r.push(values[index]);
                    }
                }
            }));
        }
        else {
            Object.keys(l).forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                if (key === '_jMonthsShort') {
                    /** @type {?} */
                    var values = l[key];
                    for (var index = 0; index < values.length; index++) {
                        r.push(values[index]);
                    }
                }
            }));
        }
        return r;
        // switch (style) {
        //     case 'long':
        //         const mlong = (minmin().localeData() as any)._jMonths.slice(0);
        //         console.log(mlong);
        //         return mlong;
        //     case 'short':
        //         const mshort = (minmin().localeData() as any)._jMonthsShort.slice(0);
        //         console.log('mshort: ', mshort);
        //         return mshort;
        //     case 'narrow':
        //         return (minmin().localeData() as any)._jMonthsShort.slice(0);
        // }
    };
    /**
     * borrowed from angular material code.
     */
    /**
     * borrowed from angular material code.
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getDateNames = /**
     * borrowed from angular material code.
     * @return {?}
     */
    function () {
        return this.range(31, (/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return String(i + 1); }));
    };
    /**
     * returns Day Of Week names in jalali calendar system.
     */
    /**
     * returns Day Of Week names in jalali calendar system.
     * @param {?} style
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getDayOfWeekNames = /**
     * returns Day Of Week names in jalali calendar system.
     * @param {?} style
     * @return {?}
     */
    function (style) {
        switch (style) {
            case 'long':
                return minmin().localeData().weekdays().slice(0);
            case 'short':
                return minmin().localeData().weekdaysShort().slice(0);
            case 'narrow':
                return minmin().localeData().weekdaysMin().slice(0);
        }
    };
    /**
     * returns year in jalali calendar system.
     */
    /**
     * returns year in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getYearName = /**
     * returns year in jalali calendar system.
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).jYear().toString();
    };
    /**
     * returns first day of week in jalali calendar system.
     * first day of week is saturday, شنبه
     */
    /**
     * returns first day of week in jalali calendar system.
     * first day of week is saturday, شنبه
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getFirstDayOfWeek = /**
     * returns first day of week in jalali calendar system.
     * first day of week is saturday, شنبه
     * @return {?}
     */
    function () {
        return 6;
    };
    /**
     * returns Number of Days In Month in jalali calendar system.
     */
    /**
     * returns Number of Days In Month in jalali calendar system.
     * @param {?} date
     * @param {?=} fa
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getNumDaysInMonth = /**
     * returns Number of Days In Month in jalali calendar system.
     * @param {?} date
     * @param {?=} fa
     * @return {?}
     */
    function (date, fa) {
        if (date['_d']) {
            return minmin.jDaysInMonth(this.getYear(date['_d']), this.getMonth(date['_d']));
        }
        return minmin.jDaysInMonth(this.getYear(date), this.getMonth(date));
    };
    /**
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.clone = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // return date.clone().locale(this.locale);
        return minmin(date);
    };
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.createDate = /**
     * @param {?} year
     * @param {?} month
     * @param {?} date
     * @return {?}
     */
    function (year, month, date) {
        return minmin().jYear(year).jMonth(month).jDate(date);
    };
    /**
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.today = /**
     * @return {?}
     */
    function () {
        return minmin();
    };
    /**
     * @param {?} value
     * @param {?} parseFormat
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.parse = /**
     * @param {?} value
     * @param {?} parseFormat
     * @return {?}
     */
    function (value, parseFormat) {
        if (value && typeof value === 'string') {
            return minmin(value, parseFormat, this.locale);
        }
        return value ? minmin(value).locale(this.locale) : null;
    };
    /**
     * @param {?} date
     * @param {?} displayFormat
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.format = /**
     * @param {?} date
     * @param {?} displayFormat
     * @return {?}
     */
    function (date, displayFormat) {
        return this.clone(date).format(displayFormat);
    };
    /**
     * @param {?} date
     * @param {?} years
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.addCalendarYears = /**
     * @param {?} date
     * @param {?} years
     * @return {?}
     */
    function (date, years) {
        return this.clone(date).add(years, 'jYear');
    };
    /**
     * @param {?} date
     * @param {?} months
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.addCalendarMonths = /**
     * @param {?} date
     * @param {?} months
     * @return {?}
     */
    function (date, months) {
        return this.clone(date).add((/** @type {?} */ (months)), 'jmonth');
    };
    /**
     * @param {?} date
     * @param {?} days
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.addCalendarDays = /**
     * @param {?} date
     * @param {?} days
     * @return {?}
     */
    function (date, days) {
        return this.clone(date).add(days, 'day');
    };
    /**
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.getISODateString = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).format('jYYYY-jMM-jDD');
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.isDateInstance = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return minmin.isMoment(obj);
    };
    /**
     * @param {?} date
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.isValid = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        return this.clone(date).isValid();
    };
    /**
     * @template T
     * @param {?} length
     * @param {?} valueFunction
     * @return {?}
     */
    JalaliMomentDateAdapter.prototype.range = /**
     * @template T
     * @param {?} length
     * @param {?} valueFunction
     * @return {?}
     */
    function (length, valueFunction) {
        /** @type {?} */
        var valuesArray = Array(length);
        for (var i = 0; i < length; i++) {
            valuesArray[i] = valueFunction(i);
        }
        return valuesArray;
    };
    /** @nocollapse */
    JalaliMomentDateAdapter.ctorParameters = function () { return [
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [MAT_DATE_LOCALE,] }] }
    ]; };
    return JalaliMomentDateAdapter;
}(DateAdapter));
export { JalaliMomentDateAdapter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamFsYWxpLWRhdGUtYWRhcHRlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1wZXJzaWFuLWRhdGVwaWNrZXIvIiwic291cmNlcyI6WyJsaWIvamFsYWxpLWRhdGUtYWRhcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUMsTUFBTSxFQUFFLFFBQVEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMvQyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDOUMsT0FBTyxLQUFLLE9BQU8sTUFBTSxnQkFBZ0IsQ0FBQztBQUMxQyxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sYUFBYSxDQUFDOztJQUN0QyxNQUFNLEdBQVEsT0FBTztBQUczQjtJQUE2QyxtREFBMkI7SUFDdEUsaUNBQWlELGFBQXFCO1FBQXRFLFlBQ0UsaUJBQU8sU0FHUjtRQUZDLEtBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7O0lBQ3ZCLENBQUM7Ozs7SUFFRCx5Q0FBTzs7O0lBQVA7UUFDRSxPQUFPLG1CQUFBLElBQUksRUFBTyxDQUFDO0lBRXJCLENBQUM7Ozs7O0lBRUQsMkNBQVM7Ozs7SUFBVCxVQUFVLElBQUk7UUFDWixPQUFPLElBQUksQ0FBQztJQUVkLENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0gseUNBQU87Ozs7O0lBQVAsVUFBUSxJQUFvQjtRQUMxQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7SUFDSCwwQ0FBUTs7Ozs7SUFBUixVQUFTLElBQW9CO1FBQzNCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBRUQ7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SSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDbEQsQ0FBQzs7Ozs7SUFFRCxnREFBYzs7OztJQUFkLFVBQWUsR0FBUTtRQUNyQixPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsQ0FBQzs7Ozs7SUFFRCx5Q0FBTzs7OztJQUFQLFVBQVEsSUFBb0I7UUFDMUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3BDLENBQUM7Ozs7Ozs7SUFFRCx1Q0FBSzs7Ozs7O0lBQUwsVUFBUyxNQUFjLEVBQUUsYUFBbUM7O1lBQ3BELFdBQVcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ2pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDL0IsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNuQztRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3JCLENBQUM7Ozs2Q0ExTFksUUFBUSxZQUFJLE1BQU0sU0FBQyxlQUFlOztJQTJMakQsOEJBQUM7Q0FBQSxBQTVMRCxDQUE2QyxXQUFXLEdBNEx2RDtTQTVMWSx1QkFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luamVjdCwgT3B0aW9uYWx9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0RhdGVBZGFwdGVyfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XHJcbmltcG9ydCAqIGFzIGpNb21lbnQgZnJvbSAnbW9tZW50LWphbGFhbGknO1xyXG5pbXBvcnQge01BVF9EQVRFX0xPQ0FMRX0gZnJvbSAnLi9pbmplY3RvcnMnO1xyXG5jb25zdCBtaW5taW46IGFueSA9IGpNb21lbnQ7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEphbGFsaU1vbWVudERhdGVBZGFwdGVyIGV4dGVuZHMgRGF0ZUFkYXB0ZXI8ak1vbWVudC5Nb21lbnQ+IHtcclxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBASW5qZWN0KE1BVF9EQVRFX0xPQ0FMRSkgbWF0RGF0ZUxvY2FsZTogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5zZXRMb2NhbGUobWF0RGF0ZUxvY2FsZSB8fCBtaW5taW4ubG9jYWxlKCdmYScpKTtcclxuICAgIG1pbm1pbi5sb2FkUGVyc2lhbigpO1xyXG4gIH1cclxuXHJcbiAgaW52YWxpZCgpIHtcclxuICAgIHJldHVybiAnaGknIGFzIGFueTtcclxuXHJcbiAgfVxyXG5cclxuICB0b0lzbzg2MDEoZGF0ZSkge1xyXG4gICAgcmV0dXJuICdoaSc7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmV0dXJucyB5ZWFyIGluIGphbGFsaSBjYWxlbmRhciBzeXN0ZW0uXHJcbiAgICovXHJcbiAgZ2V0WWVhcihkYXRlOiBqTW9tZW50Lk1vbWVudCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5jbG9uZShkYXRlKS5qWWVhcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmV0dXJucyBtb250aCBpbiBqYWxhbGkgY2FsZW5kYXIgc3lzdGVtLlxyXG4gICAqL1xyXG4gIGdldE1vbnRoKGRhdGU6IGpNb21lbnQuTW9tZW50KTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNsb25lKGRhdGUpLmpNb250aCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmV0dXJucyBkYXkgaW4gamFsYWxpIGNhbGVuZGFyIHN5c3RlbS5cclxuICAgKi9cclxuICBnZXREYXRlKGRhdGU6IGpNb21lbnQuTW9tZW50KTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNsb25lKGRhdGUpLmpEYXRlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZXR1cm5zIERheSBPZiBXZWVrIGluIGphbGFsaSBjYWxlbmRhciBzeXN0ZW0uXHJcbiAgICovXHJcbiAgZ2V0RGF5T2ZXZWVrKGRhdGU6IGpNb21lbnQuTW9tZW50KTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNsb25lKGRhdGUpLmRheSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmV0dXJucyBNb250aCBOYW1lcyBpbiBqYWxhbGkgY2FsZW5kYXIgc3lzdGVtLlxyXG4gICAqIG1vc3Qgb2YgdGhlIHRpbWUgd2UgdXNlIGxvbmcgZm9ybWF0LiBzaG9ydCBvciBuYXJyb3cgZm9ybWF0IGZvciBtb250aCBuYW1lcyBpcyBhIGxpdHRsZSBvZGQuXHJcbiAgICovXHJcbiAgZ2V0TW9udGhOYW1lcyhzdHlsZTogJ2xvbmcnIHwgJ3Nob3J0JyB8ICduYXJyb3cnKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qgcjogc3RyaW5nW10gPSBbXTtcclxuICAgIG1pbm1pbi5sb2FkUGVyc2lhbih7ZGlhbGVjdDogJ3BlcnNpYW4nLCB1c2VQZXJzaWFuRGlnaXRzOiB0cnVlfSk7XHJcbiAgICBjb25zdCBsID0gbWlubWluKCkubG9jYWxlRGF0YSgpO1xyXG4gICAgaWYgKHN0eWxlID09PSAnbG9uZycgfHwgc3R5bGUgPT09ICdzaG9ydCcpIHtcclxuICAgICAgT2JqZWN0LmtleXMobCkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgPT09ICdfak1vbnRocycpIHtcclxuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGxba2V5XTtcclxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB2YWx1ZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHIucHVzaCh2YWx1ZXNbaW5kZXhdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgT2JqZWN0LmtleXMobCkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgPT09ICdfak1vbnRoc1Nob3J0Jykge1xyXG4gICAgICAgICAgY29uc3QgdmFsdWVzID0gbFtrZXldO1xyXG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHZhbHVlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgci5wdXNoKHZhbHVlc1tpbmRleF0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcjtcclxuICAgIC8vIHN3aXRjaCAoc3R5bGUpIHtcclxuICAgIC8vICAgICBjYXNlICdsb25nJzpcclxuICAgIC8vICAgICAgICAgY29uc3QgbWxvbmcgPSAobWlubWluKCkubG9jYWxlRGF0YSgpIGFzIGFueSkuX2pNb250aHMuc2xpY2UoMCk7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKG1sb25nKTtcclxuICAgIC8vICAgICAgICAgcmV0dXJuIG1sb25nO1xyXG4gICAgLy8gICAgIGNhc2UgJ3Nob3J0JzpcclxuICAgIC8vICAgICAgICAgY29uc3QgbXNob3J0ID0gKG1pbm1pbigpLmxvY2FsZURhdGEoKSBhcyBhbnkpLl9qTW9udGhzU2hvcnQuc2xpY2UoMCk7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdtc2hvcnQ6ICcsIG1zaG9ydCk7XHJcbiAgICAvLyAgICAgICAgIHJldHVybiBtc2hvcnQ7XHJcbiAgICAvLyAgICAgY2FzZSAnbmFycm93JzpcclxuICAgIC8vICAgICAgICAgcmV0dXJuIChtaW5taW4oKS5sb2NhbGVEYXRhKCkgYXMgYW55KS5fak1vbnRoc1Nob3J0LnNsaWNlKDApO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogYm9ycm93ZWQgZnJvbSBhbmd1bGFyIG1hdGVyaWFsIGNvZGUuXHJcbiAgICovXHJcbiAgZ2V0RGF0ZU5hbWVzKCk6IHN0cmluZ1tdIHtcclxuICAgIHJldHVybiB0aGlzLnJhbmdlKDMxLCBpID0+IFN0cmluZyhpICsgMSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmV0dXJucyBEYXkgT2YgV2VlayBuYW1lcyBpbiBqYWxhbGkgY2FsZW5kYXIgc3lzdGVtLlxyXG4gICAqL1xyXG4gIGdldERheU9mV2Vla05hbWVzKHN0eWxlOiAnbG9uZycgfCAnc2hvcnQnIHwgJ25hcnJvdycpOiBzdHJpbmdbXSB7XHJcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XHJcbiAgICAgIGNhc2UgJ2xvbmcnOlxyXG4gICAgICAgIHJldHVybiBtaW5taW4oKS5sb2NhbGVEYXRhKCkud2Vla2RheXMoKS5zbGljZSgwKTtcclxuICAgICAgY2FzZSAnc2hvcnQnOlxyXG4gICAgICAgIHJldHVybiBtaW5taW4oKS5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCgpLnNsaWNlKDApO1xyXG4gICAgICBjYXNlICduYXJyb3cnOlxyXG4gICAgICAgIHJldHVybiBtaW5taW4oKS5sb2NhbGVEYXRhKCkud2Vla2RheXNNaW4oKS5zbGljZSgwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJldHVybnMgeWVhciBpbiBqYWxhbGkgY2FsZW5kYXIgc3lzdGVtLlxyXG4gICAqL1xyXG4gIGdldFllYXJOYW1lKGRhdGU6IGpNb21lbnQuTW9tZW50KTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmNsb25lKGRhdGUpLmpZZWFyKCkudG9TdHJpbmcoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJldHVybnMgZmlyc3QgZGF5IG9mIHdlZWsgaW4gamFsYWxpIGNhbGVuZGFyIHN5c3RlbS5cclxuICAgKiBmaXJzdCBkYXkgb2Ygd2VlayBpcyBzYXR1cmRheSwg2LTZhtio2YdcclxuICAgKi9cclxuICBnZXRGaXJzdERheU9mV2VlaygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIDY7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZXR1cm5zIE51bWJlciBvZiBEYXlzIEluIE1vbnRoIGluIGphbGFsaSBjYWxlbmRhciBzeXN0ZW0uXHJcbiAgICovXHJcbiAgZ2V0TnVtRGF5c0luTW9udGgoZGF0ZTogak1vbWVudC5Nb21lbnQsIGZhPyk6IG51bWJlciB7XHJcbiAgICBpZiAoZGF0ZVsnX2QnXSkge1xyXG4gICAgICByZXR1cm4gbWlubWluLmpEYXlzSW5Nb250aCh0aGlzLmdldFllYXIoZGF0ZVsnX2QnXSksIHRoaXMuZ2V0TW9udGgoZGF0ZVsnX2QnXSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1pbm1pbi5qRGF5c0luTW9udGgodGhpcy5nZXRZZWFyKGRhdGUpLCB0aGlzLmdldE1vbnRoKGRhdGUpKTtcclxuICB9XHJcblxyXG4gIGNsb25lKGRhdGU6IGpNb21lbnQuTW9tZW50KTogak1vbWVudC5Nb21lbnQge1xyXG4gICAgLy8gcmV0dXJuIGRhdGUuY2xvbmUoKS5sb2NhbGUodGhpcy5sb2NhbGUpO1xyXG4gICAgcmV0dXJuIG1pbm1pbihkYXRlKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZURhdGUoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyLCBkYXRlOiBudW1iZXIpOiBqTW9tZW50Lk1vbWVudCB7XHJcbiAgICByZXR1cm4gbWlubWluKCkualllYXIoeWVhcikuak1vbnRoKG1vbnRoKS5qRGF0ZShkYXRlKTtcclxuICB9XHJcblxyXG4gIHRvZGF5KCk6IGpNb21lbnQuTW9tZW50IHtcclxuICAgIHJldHVybiBtaW5taW4oKTtcclxuICB9XHJcblxyXG4gIHBhcnNlKHZhbHVlOiBhbnksIHBhcnNlRm9ybWF0OiBzdHJpbmcgfCBzdHJpbmdbXSk6IGpNb21lbnQuTW9tZW50IHwgbnVsbCB7XHJcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gbWlubWluKHZhbHVlLCBwYXJzZUZvcm1hdCwgdGhpcy5sb2NhbGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlID8gbWlubWluKHZhbHVlKS5sb2NhbGUodGhpcy5sb2NhbGUpIDogbnVsbDtcclxuICB9XHJcblxyXG4gIGZvcm1hdChkYXRlOiBqTW9tZW50Lk1vbWVudCwgZGlzcGxheUZvcm1hdDogYW55KTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmNsb25lKGRhdGUpLmZvcm1hdChkaXNwbGF5Rm9ybWF0KTtcclxuICB9XHJcblxyXG4gIGFkZENhbGVuZGFyWWVhcnMoZGF0ZTogak1vbWVudC5Nb21lbnQsIHllYXJzOiBudW1iZXIpOiBqTW9tZW50Lk1vbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5jbG9uZShkYXRlKS5hZGQoeWVhcnMsICdqWWVhcicpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FsZW5kYXJNb250aHMoZGF0ZTogak1vbWVudC5Nb21lbnQsIG1vbnRoczogbnVtYmVyKTogak1vbWVudC5Nb21lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoZGF0ZSkuYWRkKG1vbnRocyBhcyBhbnksICdqbW9udGgnKTtcclxuICB9XHJcblxyXG4gIGFkZENhbGVuZGFyRGF5cyhkYXRlOiBqTW9tZW50Lk1vbWVudCwgZGF5czogbnVtYmVyKTogak1vbWVudC5Nb21lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoZGF0ZSkuYWRkKGRheXMsICdkYXknKTtcclxuICB9XHJcblxyXG4gIGdldElTT0RhdGVTdHJpbmcoZGF0ZTogak1vbWVudC5Nb21lbnQpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoZGF0ZSkuZm9ybWF0KCdqWVlZWS1qTU0takREJyk7XHJcbiAgfVxyXG5cclxuICBpc0RhdGVJbnN0YW5jZShvYmo6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIG1pbm1pbi5pc01vbWVudChvYmopO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZChkYXRlOiBqTW9tZW50Lk1vbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoZGF0ZSkuaXNWYWxpZCgpO1xyXG4gIH1cclxuXHJcbiAgcmFuZ2U8VD4obGVuZ3RoOiBudW1iZXIsIHZhbHVlRnVuY3Rpb246IChpbmRleDogbnVtYmVyKSA9PiBUKTogVFtdIHtcclxuICAgIGNvbnN0IHZhbHVlc0FycmF5ID0gQXJyYXkobGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFsdWVzQXJyYXlbaV0gPSB2YWx1ZUZ1bmN0aW9uKGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlc0FycmF5O1xyXG4gIH1cclxufVxyXG4iXX0=